{"version":3,"file":"/scripts/wc-widgets.js","mappings":"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","sources":["webpack://sage/./resources/scripts/wc-widgets.js","webpack://sage/./resources/scripts/widgets/price.js","webpack://sage/./resources/scripts/widgets/sorting.js","webpack://sage/./resources/scripts/util/update-url-parameter.js","webpack://sage/./resources/scripts/widgets/categories.js","webpack://sage/./resources/scripts/widgets/meta.js"],"sourcesContent":["import {sorting} from \"./widgets/sorting\";\nimport {price} from \"./widgets/price\";\nimport {categories} from \"./widgets/categories\";\nimport {meta} from \"./widgets/meta\";\n\nwindow.growtypeWc['widgets'] = {};\n\ndocument.addEventListener('filterProductsByPrice', setWidgetsParams)\ndocument.addEventListener('filterProductsByCategories', setWidgetsParams)\n\nfunction setWidgetsParams() {\n    const searchParams = new URLSearchParams(window.location.search)\n\n    woocommerce_params_widgets.min_price = searchParams.get('min_price');\n    woocommerce_params_widgets.max_price = searchParams.get('max_price');\n\n    /**\n     * Set current orderby value\n     */\n    woocommerce_params_widgets.orderby = searchParams.get('orderby');\n\n    let categoryId = '';\n    if (typeof jQuery('body')[0] !== undefined && jQuery('body')[0].className.match(/term-\\d+/) !== null) {\n        categoryId = jQuery('body')[0].className.match(/term-\\d+/)[0];\n        categoryId = categoryId.replace(\"term-\", \"\");\n    }\n\n    if (categoryId.length > 0) {\n        woocommerce_params_widgets.categories_ids = [categoryId];\n    }\n}\n\nsetWidgetsParams();\n\njQuery(document).ready(() => {\n\n    /**\n     * Catalog widgets\n     */\n    if ($(window).width() < 641) {\n        $('.btn-catalog-filters').on('click', function () {\n            $('.sidebar-shop').fadeIn();\n        });\n\n        $('.sidebar-shop').click(function () {\n            $(this).fadeOut();\n        });\n\n        $('.sidebar-shop .widget, .sidebar-shop .widget-header').click(function () {\n            event.stopPropagation();\n        });\n    }\n\n    sorting();\n    price();\n    categories();\n    meta();\n});\n","function price() {\n    const filterProductsByPriceEvent = new Event('filterProductsByPrice');\n    var price_values = 0;\n\n    jQuery(\".price_slider\").on(\"slidestart\", function (event, ui) {\n        price_values = ui.values;\n    });\n\n    jQuery(\".price_slider\").on(\"slidestop\", function (event, ui) {\n        if (JSON.stringify(price_values) == JSON.stringify(ui.values)) {\n            return false;\n        }\n\n        woocommerce_params_widgets.min_price = ui.values[0];\n        woocommerce_params_widgets.max_price = ui.values[1];\n\n        var filter = jQuery('.widget_price_filter form');\n        var existing_products = jQuery('body').find('.products');\n        var existing_main = jQuery('body').find('#main');\n\n        $.ajax({\n            url: filter.attr('action'),\n            data: filter.serialize(), // form data\n            type: filter.attr('method'), // POST\n            beforeSend: function (xhr) {\n                existing_products.append(\"<span class='spinner-border'><div></div><div></div></span>\").addClass('is-loading');\n            },\n            success: function (data) {\n                jQuery('.products .spinner-border').remove();\n                existing_products.removeClass('is-loading');\n\n                var filtered_products = jQuery(data).find('.products');\n                var filtered_main = jQuery(data).find('#main');\n                window.history.pushState('page-url', 'url', filter.attr('action') + '?' + filter.serialize());\n                jQuery('.woocommerce-info').remove();\n                if (filtered_products.html().length === 1) {\n                    jQuery('#main').prepend(jQuery(data).find('.woocommerce-info'));\n                }\n\n                existing_main.replaceWith(filtered_main);\n                document.dispatchEvent(filterProductsByPriceEvent);\n            }\n        });\n    });\n\n}\n\nexport {price};\n","import updateURLParameter from '../util/update-url-parameter';\n\nfunction sorting() {\n    const filterProductsByOrderEvent = new Event('filterProductsByOrder');\n\n    document.addEventListener('filterProductsByPrice', widgetOrderInit)\n    document.addEventListener('filterProductsByCategories', widgetOrderInit)\n\n    function widgetOrderInit() {\n\n        if (jQuery('.woocommerce-ordering .chosen-container').length === 0 && typeof jQuery.fn.chosen === 'function') {\n            setTimeout(function () {\n                jQuery('.woocommerce-ordering select').chosen(window.selectArgs);\n            }, 200)\n        }\n\n        jQuery('.woocommerce-ordering').submit(function (e) {\n            e.preventDefault();\n        });\n\n        /**\n         * Initiate select\n         */\n\n        jQuery('.woocommerce-ordering select').change(function (e) {\n            const orderingName = jQuery(this).attr('name')\n            const orderingValue = jQuery(this).val()\n            const current_products_group = jQuery('.products').attr('data-group');\n            const current_products_base = jQuery('.products').attr('data-base');\n\n            if (jQuery(this).val().length > 0) {\n                woocommerce_params_widgets.orderby = jQuery(this).val();\n            }\n\n            /**\n             * Replace window location params\n             */\n            window.history.replaceState('', '', updateURLParameter(window.location.href, orderingName, orderingValue));\n\n            jQuery('.woocommerce-pagination .page-numbers').each(function (index, element) {\n                if (typeof jQuery(element).attr('href') !== 'undefined') {\n                    let regex = new RegExp('(' + orderingName + '=)[^\\&]+');\n                    jQuery(element).attr('href', jQuery(element).attr('href').replace(regex, '$1' + orderingValue));\n                }\n            });\n\n            /**\n             * Get products\n             */\n            $.ajax({\n                url: woocommerce_params.ajax_url,\n                type: \"post\",\n                data: {\n                    orderby: woocommerce_params_widgets.orderby,\n                    action: 'filter_products',\n                    categories_ids: woocommerce_params_widgets.categories_ids,\n                    page_nr: growtype_params.page_nr,\n                    products_group: current_products_group,\n                    min_price: woocommerce_params_widgets.min_price,\n                    max_price: woocommerce_params_widgets.max_price,\n                    base: current_products_base,\n                },\n                beforeSend: function () {\n                    /**\n                     * Spinner add\n                     */\n                    jQuery('.products').append(\"<span class='spinner-border'><div></div><div></div></span>\").addClass('is-loading');\n                },\n                success: function (data) {\n                    /**\n                     * Spinner remove\n                     */\n                    jQuery('.products .spinner-border').remove();\n\n                    jQuery('.products').removeClass('is-loading').html(\"\").append(data.products).promise().done(function () {\n                        document.dispatchEvent(filterProductsByOrderEvent);\n                    });\n\n                    if (jQuery('.woocommerce-pagination').length > 0) {\n                        jQuery('.woocommerce-pagination').replaceWith(data.pagination);\n                    } else {\n                        jQuery('.products').after(data.pagination);\n                    }\n\n                    if (growtype_params.page_nr > 1 && data.pagination.length === 0) {\n                        window.location = current_products_base + '?orderby=' + woocommerce_params_widgets.orderby;\n                    }\n                }\n            });\n        });\n    }\n\n    widgetOrderInit();\n}\n\nexport {sorting};\n\n\n","export default function updateURLParameter(url, param, paramVal)\n{\n    let TheAnchor = null;\n    let newAdditionalURL = \"\";\n    let tempArray = url.split(\"?\");\n    let baseURL = tempArray[0];\n    let additionalURL = tempArray[1];\n    let temp = \"\";\n\n    if (additionalURL)\n    {\n        let tmpAnchor = additionalURL.split(\"#\");\n        let TheParams = tmpAnchor[0];\n        TheAnchor = tmpAnchor[1];\n        if(TheAnchor)\n            additionalURL = TheParams;\n\n        tempArray = additionalURL.split(\"&\");\n\n        for (let i=0; i<tempArray.length; i++)\n        {\n            if(tempArray[i].split('=')[0] != param)\n            {\n                newAdditionalURL += temp + tempArray[i];\n                temp = \"&\";\n            }\n        }\n    }\n    else\n    {\n        let tmpAnchor = baseURL.split(\"#\");\n        let TheParams = tmpAnchor[0];\n        TheAnchor  = tmpAnchor[1];\n\n        if(TheParams)\n            baseURL = TheParams;\n    }\n\n    if(TheAnchor)\n        paramVal += \"#\" + TheAnchor;\n\n    let rows_txt = temp + \"\" + param + \"=\" + paramVal;\n    return baseURL + \"?\" + newAdditionalURL + rows_txt;\n}\n","function categories() {\n    const filterProductsByCategories = new Event('filterProductsByCategories');\n\n    // document.addEventListener('filterProductsByPrice', widgetCategoriesInit)\n    // document.addEventListener('filterProductsByOrder', widgetCategoriesInit)\n\n    widgetCategoriesInit();\n\n    /**\n     *\n     */\n    function widgetCategoriesInit() {\n        if (jQuery('.product-categories[data-multiple=\"true\"]').length > 0) {\n\n            let currentCategoriesIds = getCurrentCategoriesIds();\n\n            if (currentCategoriesIds.length > 0) {\n                currentCategoriesIds.map(function (id) {\n                    jQuery('.product-categories .cat-item-' + id).addClass('current-cat');\n                });\n\n                getFilteredProductsByCategory(currentCategoriesIds);\n            }\n\n            /**\n             * Cat click\n             */\n            jQuery('.product-categories[data-multiple=\"true\"] a').click(function (e) {\n                e.preventDefault();\n                const parent = jQuery(this).closest('.cat-item');\n                const classes = parent.attr('class').split(' ');\n                let catId = null;\n                let currentCategoriesIds = [];\n                let newCategoriesIds = [];\n\n                /**\n                 * Disable parent\n                 */\n                if (jQuery('.product-categories[data-multiple-include-parent=\"true\"]').length === 0) {\n                    if (parent.hasClass('cat-parent')) {\n                        return false;\n                    }\n                }\n\n                /**\n                 * Get categories\n                 */\n                if (classes.length >= 2) {\n                    catId = classes[1];\n                    catId = catId.split(\"cat-item-\").pop();\n                }\n\n                /**\n                 * If no categories found, redirect\n                 */\n                if (catId === null) {\n                    window.redirect(jQuery(this).attr('href'))\n                }\n\n                currentCategoriesIds = getCurrentCategoriesIds();\n                newCategoriesIds = getCurrentCategoriesIds();\n\n                /**\n                 * Update categories with new ids\n                 */\n                if (parent.hasClass('current-cat')) {\n                    parent.removeClass('current-cat');\n\n                    let index = newCategoriesIds.indexOf(catId);\n                    if (index !== -1) {\n                        newCategoriesIds.splice(index, 1);\n                    }\n                } else {\n                    parent.addClass('current-cat');\n                    newCategoriesIds.push(catId)\n                }\n\n                updateSearchUrl(currentCategoriesIds, newCategoriesIds);\n\n                getFilteredProductsByCategory(newCategoriesIds);\n            });\n\n            /**\n             * Clear selections\n             */\n            jQuery('.btn-clear-cat-filter').click(function () {\n                let currentCategoriesIds = getCurrentCategoriesIds();\n\n                if (currentCategoriesIds.length > 0) {\n                    updateSearchUrl(currentCategoriesIds);\n\n                    getFilteredProductsByCategory();\n\n                    jQuery('.product-categories .cat-item').removeClass('current-cat');\n                }\n            });\n        }\n    }\n\n    /**\n     * @param categoriesIds\n     */\n    function getFilteredProductsByCategory(categoriesIds = []) {\n\n        woocommerce_params_widgets.categories_ids = categoriesIds;\n\n        $.ajax({\n            url: woocommerce_params.ajax_url,\n            type: \"post\",\n            data: {\n                orderby: woocommerce_params_widgets.orderby,\n                action: 'filter_products',\n                categories_ids: categoriesIds,\n            },\n            beforeSend: function () {\n                jQuery('.products').addClass('is-loading');\n            },\n            success: function (data) {\n                jQuery('.products').removeClass('is-loading').html(\"\").append(data).promise().done(function () {\n                    // document.dispatchEvent(filterProductsByOrderEvent);\n                });\n            }\n        });\n    }\n\n    /**\n     * Update url\n     */\n    function updateSearchUrl(currentCategoriesIds = [], newCategoriesIds = []) {\n        const currentUrl = window.location.href;\n        let newUrl = null;\n\n        if (newCategoriesIds.length > 0) {\n            if (currentUrl.includes(\"categories\")) {\n                newUrl = currentUrl.replace(\"categories=\" + currentCategoriesIds.toString(), \"categories=\" + newCategoriesIds.toString());\n            } else if (window.location.search.length > 0) {\n                newUrl = currentUrl + '&categories=' + newCategoriesIds.toString() + '';\n            } else {\n                newUrl = currentUrl + '?categories=' + newCategoriesIds.toString() + '';\n            }\n        } else {\n            newUrl = currentUrl\n                .replace(\"&categories=\" + currentCategoriesIds.toString(), \"\")\n                .replace(\"?categories=\" + currentCategoriesIds.toString() + '&', \"?\")\n                .replace(\"?categories=\" + currentCategoriesIds.toString(), \"\")\n        }\n\n        if (newUrl.length > 0) {\n            window.history.pushState('page-url', 'url', newUrl);\n        }\n    }\n\n    /**\n     * Get categories ids\n     */\n    function getCurrentCategoriesIds() {\n        const currentUrl = window.location.href;\n        const site = new URL(currentUrl);\n        const params = new URLSearchParams(site.search);\n        let currentCategoriesIds = [];\n\n        for (const param of params) {\n            if (param[0].length > 0 && param[0] === 'categories') {\n                currentCategoriesIds = param[1].split(\",\");\n            }\n        }\n\n        return currentCategoriesIds;\n    }\n}\n\nexport {categories};\n","function meta() {\n    window.growtypeWc['widgets']['meta'] = {};\n\n    const filterProductsByMetaEvent = new Event('filterProductsByMeta');\n\n    $('.widget_product_meta_filter .b-options-single').click(function () {\n\n        let existingProducts = jQuery('body').find('.products');\n\n        $(this).toggleClass('is-active');\n\n        let metaKey = $('.widget_product_meta_filter .b-content').attr('data-key');\n\n        window.growtypeWc['widgets']['meta']['values'] = [];\n        $('.widget_product_meta_filter .b-options-single.is-active').map(function (index, element) {\n            let value = $(element).attr('data-value');\n            window.growtypeWc['widgets']['meta']['values'].push(value);\n        })\n\n        $.ajax({\n            url: growtype_wc_ajax.url,\n            type: \"post\",\n            data: {\n                action: 'filter_products',\n                meta_key: metaKey,\n                meta_values: JSON.stringify(window.growtypeWc['widgets']['meta']['values']),\n                categories_ids: woocommerce_params_widgets.categories_ids,\n            },\n            beforeSend: function (xhr) {\n                existingProducts.append(\"<span class='spinner-border'><div></div><div></div></span>\").addClass('is-loading');\n            },\n            success: function (data) {\n                jQuery('.products .spinner-border').remove();\n                existingProducts.removeClass('is-loading');\n\n                jQuery('.woocommerce-info').remove();\n\n                existingProducts.html(data.products)\n\n                if (jQuery('.woocommerce-pagination').length > 0) {\n                    jQuery('.woocommerce-pagination').replaceWith(data.pagination);\n                } else {\n                    jQuery('.products').after(data.pagination);\n                }\n\n                document.dispatchEvent(filterProductsByMetaEvent);\n            }\n        });\n    })\n}\n\nexport {meta};\n"],"names":["setWidgetsParams","searchParams","URLSearchParams","window","location","search","woocommerce_params_widgets","min_price","get","max_price","orderby","categoryId","undefined","jQuery","className","match","replace","length","categories_ids","growtypeWc","document","addEventListener","ready","filterProductsByPriceEvent","price_values","$","width","on","fadeIn","click","this","fadeOut","event","stopPropagation","filterProductsByOrderEvent","Event","widgetOrderInit","fn","chosen","setTimeout","selectArgs","submit","e","preventDefault","change","orderingName","attr","orderingValue","val","current_products_group","current_products_base","history","replaceState","url","param","paramVal","TheAnchor","newAdditionalURL","tempArray","split","baseURL","additionalURL","temp","tmpAnchor","TheParams","i","updateURLParameter","href","each","index","element","regex","RegExp","ajax","woocommerce_params","ajax_url","type","data","action","page_nr","growtype_params","products_group","base","beforeSend","append","addClass","success","remove","removeClass","html","products","promise","done","dispatchEvent","replaceWith","pagination","after","sorting","ui","values","JSON","stringify","filter","existing_products","find","existing_main","serialize","xhr","filtered_products","filtered_main","pushState","prepend","getFilteredProductsByCategory","categoriesIds","updateSearchUrl","currentCategoriesIds","newCategoriesIds","currentUrl","newUrl","includes","toString","getCurrentCategoriesIds","site","URL","map","id","parent","closest","classes","catId","hasClass","pop","redirect","indexOf","splice","push","widgetCategoriesInit","categories","filterProductsByMetaEvent","existingProducts","toggleClass","metaKey","value","growtype_wc_ajax","meta_key","meta_values","meta"],"sourceRoot":""}