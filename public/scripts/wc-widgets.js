!function(){"use strict";function e(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(e);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,i=function(){};return{s:i,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return c=e.done,e},e:function(e){s=!0,a=e},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw a}}}}function r(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=new Array(r);t<r;t++)o[t]=e[t];return o}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(){var e=new URLSearchParams(window.location.search);woocommerce_params_widgets.min_price=e.get("min_price"),woocommerce_params_widgets.max_price=e.get("max_price"),woocommerce_params_widgets.orderby=e.get("orderby");var r="";void 0!==t(jQuery("body")[0])&&null!==jQuery("body")[0].className.match(/term-\d+/)&&(r=(r=jQuery("body")[0].className.match(/term-\d+/)[0]).replace("term-","")),r.length>0&&(woocommerce_params_widgets.categories_ids=[r])}window.growtypeWc.widgets={},document.addEventListener("filterProductsByPrice",o),document.addEventListener("filterProductsByCategories",o),o(),jQuery(document).ready((function(){var r,t;$(window).width()<641&&($(".btn-catalog-filters").on("click",(function(){$(".sidebar-shop").fadeIn()})),$(".sidebar-shop").click((function(){$(this).fadeOut()})),$(".sidebar-shop .widget, .sidebar-shop .widget-header").click((function(){event.stopPropagation()}))),function(){var e=new Event("filterProductsByOrder");function r(){0===jQuery(".woocommerce-ordering .chosen-container").length&&"function"==typeof jQuery.fn.chosen&&setTimeout((function(){jQuery(".woocommerce-ordering select").chosen(window.selectArgs)}),200),jQuery(".woocommerce-ordering").submit((function(e){e.preventDefault()})),jQuery(".woocommerce-ordering select").change((function(r){var t=jQuery(this).attr("name"),o=jQuery(this).val(),n=jQuery(".products").attr("data-group"),i=jQuery(".products").attr("data-base");jQuery(this).val().length>0&&(woocommerce_params_widgets.orderby=jQuery(this).val()),window.history.replaceState("","",function(e,r,t){var o=null,n="",i=e.split("?"),a=i[0],c=i[1],s="";if(c){var u=c.split("#"),d=u[0];(o=u[1])&&(c=d),i=c.split("&");for(var l=0;l<i.length;l++)i[l].split("=")[0]!=r&&(n+=s+i[l],s="&")}else{var p=a.split("#"),m=p[0];o=p[1],m&&(a=m)}return o&&(t+="#"+o),a+"?"+n+s+r+"="+t}(window.location.href,t,o)),jQuery(".woocommerce-pagination .page-numbers").each((function(e,r){if(void 0!==jQuery(r).attr("href")){var n=new RegExp("("+t+"=)[^&]+");jQuery(r).attr("href",jQuery(r).attr("href").replace(n,"$1"+o))}})),$.ajax({url:woocommerce_params.ajax_url,type:"post",data:{orderby:woocommerce_params_widgets.orderby,action:"filter_products",categories_ids:woocommerce_params_widgets.categories_ids,page_nr:growtype_params.page_nr,products_group:n,min_price:woocommerce_params_widgets.min_price,max_price:woocommerce_params_widgets.max_price,base:i},beforeSend:function(){jQuery(".products").append("<span class='spinner-border'><div></div><div></div></span>").addClass("is-loading")},success:function(r){jQuery(".products .spinner-border").remove(),jQuery(".products").removeClass("is-loading").html("").append(r.products).promise().done((function(){document.dispatchEvent(e)})),jQuery(".woocommerce-pagination").length>0?jQuery(".woocommerce-pagination").replaceWith(r.pagination):jQuery(".products").after(r.pagination),growtype_params.page_nr>1&&0===r.pagination.length&&(window.location=i+"?orderby="+woocommerce_params_widgets.orderby)}})}))}document.addEventListener("filterProductsByPrice",r),document.addEventListener("filterProductsByCategories",r),r()}(),r=new Event("filterProductsByPrice"),t=0,jQuery(".price_slider").on("slidestart",(function(e,r){t=r.values})),jQuery(".price_slider").on("slidestop",(function(e,o){if(JSON.stringify(t)==JSON.stringify(o.values))return!1;woocommerce_params_widgets.min_price=o.values[0],woocommerce_params_widgets.max_price=o.values[1];var n=jQuery(".widget_price_filter form"),i=jQuery("body").find(".products"),a=jQuery("body").find("#main");$.ajax({url:n.attr("action"),data:n.serialize(),type:n.attr("method"),beforeSend:function(e){i.append("<span class='spinner-border'><div></div><div></div></span>").addClass("is-loading")},success:function(e){jQuery(".products .spinner-border").remove(),i.removeClass("is-loading");var t=jQuery(e).find(".products"),o=jQuery(e).find("#main");window.history.pushState("page-url","url",n.attr("action")+"?"+n.serialize()),jQuery(".woocommerce-info").remove(),1===t.html().length&&jQuery("#main").prepend(jQuery(e).find(".woocommerce-info")),a.replaceWith(o),document.dispatchEvent(r)}})})),function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];woocommerce_params_widgets.categories_ids=e,$.ajax({url:woocommerce_params.ajax_url,type:"post",data:{orderby:woocommerce_params_widgets.orderby,action:"filter_products",categories_ids:e},beforeSend:function(){jQuery(".products").addClass("is-loading")},success:function(e){jQuery(".products").removeClass("is-loading").html("").append(e).promise().done((function(){}))}})}function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=window.location.href,o=null;(o=r.length>0?t.includes("categories")?t.replace("categories="+e.toString(),"categories="+r.toString()):window.location.search.length>0?t+"&categories="+r.toString():t+"?categories="+r.toString():t.replace("&categories="+e.toString(),"").replace("?categories="+e.toString()+"&","?").replace("?categories="+e.toString(),"")).length>0&&window.history.pushState("page-url","url",o)}function o(){var r,t=window.location.href,o=new URL(t),n=[],i=e(new URLSearchParams(o.search));try{for(i.s();!(r=i.n()).done;){var a=r.value;a[0].length>0&&"categories"===a[0]&&(n=a[1].split(","))}}catch(e){i.e(e)}finally{i.f()}return n}new Event("filterProductsByCategories"),function(){if(jQuery('.product-categories[data-multiple="true"]').length>0){var e=o();e.length>0&&(e.map((function(e){jQuery(".product-categories .cat-item-"+e).addClass("current-cat")})),r(e)),jQuery('.product-categories[data-multiple="true"] a').click((function(e){e.preventDefault();var n,i=jQuery(this).closest(".cat-item"),a=i.attr("class").split(" "),c=null,s=[];if(0===jQuery('.product-categories[data-multiple-include-parent="true"]').length&&i.hasClass("cat-parent"))return!1;if(a.length>=2&&(c=(c=a[1]).split("cat-item-").pop()),null===c&&window.redirect(jQuery(this).attr("href")),n=o(),s=o(),i.hasClass("current-cat")){i.removeClass("current-cat");var u=s.indexOf(c);-1!==u&&s.splice(u,1)}else i.addClass("current-cat"),s.push(c);t(n,s),r(s)})),jQuery(".btn-clear-cat-filter").click((function(){var e=o();e.length>0&&(t(e),r(),jQuery(".product-categories .cat-item").removeClass("current-cat"))}))}}()}(),function(){window.growtypeWc.widgets.meta={};var e=new Event("filterProductsByMeta");$(".widget_product_meta_filter .b-options-single").click((function(){var r=jQuery("body").find(".products");$(this).toggleClass("is-active");var t=$(".widget_product_meta_filter .b-content").attr("data-key");window.growtypeWc.widgets.meta.values=[],$(".widget_product_meta_filter .b-options-single.is-active").map((function(e,r){var t=$(r).attr("data-value");window.growtypeWc.widgets.meta.values.push(t)})),$.ajax({url:growtype_wc_ajax.url,type:"post",data:{action:"filter_products",meta_key:t,meta_values:JSON.stringify(window.growtypeWc.widgets.meta.values),categories_ids:woocommerce_params_widgets.categories_ids},beforeSend:function(e){r.append("<span class='spinner-border'><div></div><div></div></span>").addClass("is-loading")},success:function(t){jQuery(".products .spinner-border").remove(),r.removeClass("is-loading"),jQuery(".woocommerce-info").remove(),r.html(t.products),jQuery(".woocommerce-pagination").length>0?jQuery(".woocommerce-pagination").replaceWith(t.pagination):jQuery(".products").after(t.pagination),document.dispatchEvent(e)}})}))}()}))}();
//# sourceMappingURL=wc-widgets.js.map