!function(){"use strict";function o(){$(".woocommerce-error .btn-close, .woocommerce-info .btn-close, .woocommerce-message .btn-close").click((function(){$(this).parent().fadeOut()}))}!function(e){function c(o){var e=new URL(window.location.href);e.searchParams.delete(o),window.history.replaceState({},document.title,e.toString())}var n=e(".woocommerce-form-coupon-toggle .showcoupon");function t(){jQuery(".e-discount-trigger").click((function(){jQuery(this).fadeOut((function(){jQuery(".b-coupon").fadeIn()}))}))}setTimeout((function(){"1"===function(o){o=o.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+o+"=([^&#]*)").exec(window.location.search);return null===e?"":decodeURIComponent(e[1].replace(/\+/g," "))}("growtype_wc_coupon_form_visible")&&n.first().click()}),500),n.click((function(){var o,n,t;e(".woocommerce-form-coupon").is(":visible")?c("growtype_wc_coupon_form_visible"):(o="growtype_wc_coupon_form_visible=1",t=window.location.href,n=t.includes("?")?t.split("?")[0]+"?".concat(o):t+"?".concat(o),window.history.pushState({},"",n))})),t(),jQuery("body").on("applied_coupon",(function(c,n,u){e(".woocommerce-form-coupon-content .woocommerce-message").remove(),e(".woocommerce-form-coupon-content").append('<div class="woocommerce-message">'+u.message+"</div>"),setTimeout((function(){e(".woocommerce-form-coupon-content").find(".woocommerce-message").fadeOut().promise().done((function(){e(this).remove()}))}),3e3),setTimeout((function(){t()}),1e3),o()})),jQuery("body").on("applied_coupon_in_checkout",(function(e,c){console.log("applied_coupon_in_checkout"),o()})),jQuery("body").on("update_checkout",(function(o,e){console.log("update_checkout")})),jQuery("body").on("updated_checkout",(function(o,e){console.log("updated_checkout")})),jQuery("body").on("removed_coupon",(function(o,e){console.log("removed_coupon")})),jQuery("body").on("updated_wc_div",(function(o,e){console.log("updated_wc_div")})),e(document.body).on("checkout_error",(function(){console.log("checkout_error")})),e(document.body).on("woocommerce-applied_coupon-in_checkout",(function(o,e){console.log("woocommerce-applied_coupon-in_checkout")})),e('.coupon-form button[name="apply_coupon"]').on("click",(function(){console.log("apply_coupon submit")})),jQuery("body").on("updated_cart_totals",(function(){console.log("updated_cart_totals"),t()})),e(document.body).on("click",'button[name="apply_coupon"]',(function(o){o.preventDefault();var n=e(this).closest("form").find('input[name="coupon_code"]').val(),t={action:"growtype_wc_apply_coupon_custom",security:wc_checkout_params.apply_coupon_nonce,coupon_code:n};c("growtype_wc_coupon_form_visible"),e.ajax({type:"POST",url:growtype_wc_ajax.url,data:t,success:function(o){o.success?(e(document.body).trigger("update_checkout"),e(document.body).trigger("applied_coupon",[n,o.data])):e(document.body).trigger("apply_coupon_failed",[n,o.data])},error:function(){e(document.body).trigger("apply_coupon_failed",[n,{error:"Ajax error occurred"}])}})})),e(document.body).on("apply_coupon_failed",(function(c,n,t){e(".woocommerce-form-coupon-content .woocommerce-message").remove(),e(".woocommerce-form-coupon-content").append('<div class="woocommerce-message woocommerce-error">'+t.message+"</div>"),setTimeout((function(){e(".woocommerce-form-coupon-content").find(".woocommerce-message").fadeOut().promise().done((function(){e(this).remove()}))}),3e3),o()}))}(jQuery)}();
//# sourceMappingURL=wc-coupon.js.map