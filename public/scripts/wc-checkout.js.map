{"version":3,"file":"/scripts/wc-checkout.js","mappings":"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","sources":["webpack://sage/./resources/scripts/components/message.js","webpack://sage/./resources/scripts/wc-checkout.js","webpack://sage/./resources/scripts/events/payment-form-loaded.js"],"sourcesContent":["function message() {\n    $('.woocommerce-error .btn-close, .woocommerce-info .btn-close, .woocommerce-message .btn-close').click(function () {\n        $(this).parent().fadeOut();\n    })\n}\n\nexport {message};\n","import {message} from \"./components/message\";\nimport {paymentFormLoaded} from \"./events/payment-form-loaded\";\n\n(function ($) {\n    \"use strict\";\n\n    let initialLoad = true;\n\n    jQuery('form.checkout').on('submit', function (event) {\n        console.log('submit');\n    });\n\n    jQuery(document.body).on('checkout_error', function () {\n        if ($(window).width() > 640) {\n            let notice = $('.wc-block-components-notice-banner').height() + 100;\n            if (notice > 110) {\n                $('.payment-methods-position-after_shipping_details .woocommerce-NoticeGroup + .col2-set').css('padding-top', notice + 'px');\n            }\n        }\n        message();\n    });\n\n    /**\n     * Update state select after country change\n     */\n    jQuery('select#billing_country, select#shipping_country').on('change', function () {\n        resetSelects();\n    });\n\n    /**\n     * Reset form selects\n     */\n    function resetSelects() {\n        window.select.chosen(\"destroy\");\n        if (parseInt(window.growtype_wc_ajax.wc_version) < 8) {\n            setTimeout(function () {\n                window.select = jQuery('select:visible');\n                window.select.chosen(window.selectArgs);\n            }, 200)\n        } else {\n            if ($('select#billing_state').length > 0) {\n                setTimeout(function () {\n                    $('select#billing_state').select2('destroy');\n                    $('select#billing_state').select2();\n                }, 100)\n            }\n        }\n    }\n\n    /**\n     * Clear payment methods empty description boxes\n     */\n    jQuery('body').on('updated_checkout', function () {\n        initFloatingLabels();\n        resetSelects();\n\n        if (parseInt(window.growtype_wc_ajax.wc_version) > 7) {\n            // window.select.chosen(\"destroy\");\n        } else {\n            jQuery('.woocommerce-checkout .chosen-container').show();\n        }\n\n        if ($('select#billing_state').length > 0) {\n            if ($('#billing_state option').length > 1) {\n                $('#billing_state').closest('.form-row').show();\n            } else {\n                $('#billing_state').closest('.form-row').hide();\n            }\n        }\n\n        jQuery(document).on('ready', function () {\n            jQuery('.woocommerce-checkout .chosen-container').show();\n        });\n\n        jQuery('.wc_payment_methods .payment_box').each(function (index, element) {\n            if (jQuery(element).find('p').length === 0 && jQuery(this).hasClass('payment_method_braintree_paypal')) {\n                jQuery(this).addClass('is-disabled');\n            }\n        })\n\n        selectPaymentMethod();\n    });\n\n    function selectPaymentMethod() {\n        $('.woocommerce-checkout-payment .wc_payment_method label, .woocommerce-checkout-payment .wc_payment_method input').click(function () {\n            if (!$(this).closest('.wc_payment_method').hasClass('is-active')) {\n                $('.woocommerce-checkout-payment .wc_payment_method').removeClass('is-active')\n                $(this).closest('.wc_payment_method').addClass('is-active');\n            }\n        });\n\n        $('.woocommerce-checkout-payment .wc_payment_method').each(function (index, element) {\n            if ($(element).find('input:checked').length > 0) {\n                $(element).addClass('is-active');\n                return;\n            }\n        });\n    }\n\n    /**\n     * Input floating label\n     */\n    function initFloatingLabels() {\n        if ($('body').hasClass('woocommerce-checkout-input-label-style-floating')) {\n            $('.form-row .woocommerce-input-wrapper input').each(function (index, element) {\n                updateInputLabel($(element));\n            });\n\n            $('.form-row label').click(function () {\n                $(this).next('input').focus();\n            });\n\n            $('.form-row .woocommerce-input-wrapper input').focusin(function () {\n                $(this).closest('.form-row').find('label').addClass('is-active');\n            });\n\n            $('.form-row .woocommerce-input-wrapper input').focusout(function () {\n                updateInputLabel($(this));\n            });\n\n            function updateInputLabel(input) {\n                if (input.val().length <= 0) {\n                    input.closest('.form-row').find('label').removeClass('is-active');\n                } else {\n                    input.closest('.form-row').find('label').addClass('is-active');\n                }\n            }\n        }\n    }\n\n    $(document.body).on('change ready', 'select[name=billing_country]', function () {\n        setTimeout(function () {\n            updatePostcodeStatus();\n        }, 200)\n    });\n\n    $(document).ready(function () {\n        setTimeout(function () {\n            updatePostcodeStatus();\n        }, 200)\n    });\n\n    function updatePostcodeStatus() {\n        let postcode = $('#billing_postcode_field:visible').length\n\n        if (postcode > 0) {\n            $('form[name=\"checkout\"]')\n                .addClass('postcode-is-visible')\n                .removeClass('postcode-is-hidden')\n        } else {\n            $('form[name=\"checkout\"]')\n                .removeClass('postcode-is-visible')\n                .addClass('postcode-is-hidden')\n        }\n    }\n\n    if ($('body').hasClass('woocommerce-checkout-steps')) {\n        $('#customer_details .btn-next').click(function () {\n            event.stopPropagation();\n            event.preventDefault();\n\n            if (!billingFieldsAreValid()) {\n                return\n            }\n\n            $(this).closest('.b-actions').fadeOut();\n\n            let formValues = getAllFormValues('.woocommerce-billing-fields__field-wrapper');\n            let summary = $('<div class=\"woocommerce-billing-fields-summary\"></div>');\n\n            if (formValues.billing_first_name || formValues.billing_last_name) {\n                summary.append('<div class=\"e-name\">' + formValues.billing_first_name + ' ' + formValues.billing_last_name + '</div>')\n            }\n\n            Object.entries(formValues).map(function (element) {\n                let key = element[0];\n                let value = element[1];\n\n                if (key === 'billing_first_name' || key === 'billing_last_name') {\n                    return;\n                }\n\n                summary.append('<div class=\"e-value\">' + value + '</div>')\n            })\n\n            let billingFields = $('.woocommerce-billing-fields__field-wrapper');\n            billingFields.fadeOut().promise().done(function () {\n                $(this).closest('.col2-set').addClass('is-completed')\n\n                summary.insertAfter(billingFields);\n\n                $(this).closest('.col2-set').find('.woocommerce-additional-fields').fadeIn();\n\n                $('.b-breadcrumb .b-breadcrumb-text').removeClass('is-active');\n                $('.b-breadcrumb .b-breadcrumb-text[data-type=\"payment\"]').addClass('is-active');\n\n                /**\n                 * Fire event\n                 */\n                document.dispatchEvent(paymentFormLoaded({\n                    value: window.growtype_wc_ajax.cart_total,\n                    currency: window.growtype_wc_ajax.currency,\n                    items: window.growtype_wc_ajax.items_gtm,\n                    user_id: window.growtype_wc_ajax.user_id,\n                    email: window.growtype_wc_ajax.email,\n                }))\n            })\n        });\n\n        $('.woocommerce-billing-fields .btn-edit').click(function () {\n            let parent = $(this).closest('.col2-set');\n\n            parent.find('.woocommerce-additional-fields').fadeOut();\n            parent.find('.woocommerce-billing-fields-summary').fadeOut().promise().done(function () {\n                resetSelects();\n\n                parent.removeClass('is-completed');\n                parent.find('.woocommerce-billing-fields__field-wrapper').fadeIn();\n                parent.find('.b-actions').fadeIn();\n\n                $('.b-breadcrumb .b-breadcrumb-text').removeClass('is-active');\n                $('.b-breadcrumb .b-breadcrumb-text[data-type=\"information\"]').addClass('is-active');\n            })\n        });\n\n        function billingFieldsAreValid() {\n            jQuery('.validate-required input, .validate-required select').trigger('validate');\n\n            let isValid = true;\n            jQuery('.woocommerce-invalid').each(function (index, element) {\n                if (element.id.length > 0) {\n                    isValid = false;\n                }\n            })\n\n            return isValid;\n        }\n\n        function getAllFormValues(form) {\n            const formElements = document.querySelectorAll(form + ' input, ' + form + ' select, ' + form + ' textarea');\n\n            const formData = {};\n\n            formElements.forEach(element => {\n                if (element.name) {\n                    if (element.type === 'checkbox') {\n                        formData[element.name] = element.checked;\n                    } else if (element.type === 'select-one' && element.options[element.selectedIndex]) {\n                        formData[element.name] = element.options[element.selectedIndex].text;\n                    } else {\n                        formData[element.name] = element.value;\n                    }\n                }\n            });\n\n            return formData;\n        }\n    }\n\n    if ($('body').hasClass('payment-methods-position-after_shipping_details')) {\n        $('#order_review_heading').click(function () {\n            $(this).toggleClass('is-open')\n        });\n    }\n})(jQuery);\n","export function paymentFormLoaded(params) {\n    return new CustomEvent(\"growtypeWcPaymentFormLoaded\", {\n        detail: params\n    });\n}\n"],"names":["message","$","click","this","parent","fadeOut","resetSelects","window","select","chosen","parseInt","growtype_wc_ajax","wc_version","setTimeout","jQuery","selectArgs","length","select2","updatePostcodeStatus","addClass","removeClass","on","event","console","log","document","body","width","notice","height","css","hasClass","updateInputLabel","input","val","closest","find","each","index","element","next","focus","focusin","focusout","initFloatingLabels","show","hide","ready","stopPropagation","preventDefault","trigger","isValid","id","billingFieldsAreValid","form","formElements","formData","formValues","querySelectorAll","forEach","name","type","checked","options","selectedIndex","text","value","summary","billing_first_name","billing_last_name","append","Object","entries","map","key","billingFields","promise","done","params","insertAfter","fadeIn","dispatchEvent","cart_total","currency","items","items_gtm","user_id","email","CustomEvent","detail","toggleClass"],"sourceRoot":""}