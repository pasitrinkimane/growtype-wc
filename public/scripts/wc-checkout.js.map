{"version":3,"file":"/scripts/wc-checkout.js","mappings":"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","sources":["webpack://sage/./resources/scripts/components/message.js","webpack://sage/./resources/scripts/wc-checkout.js"],"sourcesContent":["function message() {\n    $('.woocommerce-error .btn-close, .woocommerce-info .btn-close, .woocommerce-message .btn-close').click(function () {\n        $(this).parent().fadeOut();\n    })\n}\n\nexport {message};\n","import {message} from \"./components/message\";\n\n(function ($) {\n    \"use strict\";\n\n    let initialLoad = true;\n\n    jQuery('form.checkout').on('submit', function (event) {\n        console.log('submit');\n    });\n\n    jQuery(document.body).on('checkout_error', function () {\n        if ($(window).width() > 640) {\n            let notice = $('.wc-block-components-notice-banner').height() + 100;\n            if (notice > 110) {\n                $('.woocommerce-checkout-steps .woocommerce-NoticeGroup + .col2-set').css('padding-top', notice + 'px');\n            }\n        }\n        message();\n    });\n\n    /**\n     * Update state select after country change\n     */\n    jQuery('select#billing_country, select#shipping_country').on('change', function () {\n        resetSelects();\n    });\n\n    /**\n     * Reset form selects\n     */\n    function resetSelects() {\n        window.select.chosen(\"destroy\");\n        if (parseInt(window.growtype_wc_ajax.wc_version) < 8) {\n            setTimeout(function () {\n                window.select = jQuery('select:visible');\n                window.select.chosen(window.selectArgs);\n            }, 200)\n        } else {\n            setTimeout(function () {\n                $('select#billing_state').select2('destroy');\n                $('select#billing_state').select2();\n            }, 100)\n        }\n    }\n\n    /**\n     * Clear payment methods empty description boxes\n     */\n    jQuery('body').on('updated_checkout', function () {\n        console.log('updated_checkout')\n\n        initFloatingLabels();\n        resetSelects();\n\n        if (parseInt(window.growtype_wc_ajax.wc_version) > 7) {\n            // window.select.chosen(\"destroy\");\n        } else {\n            jQuery('.woocommerce-checkout .chosen-container').show();\n        }\n\n        if ($('select#billing_state').length > 0) {\n            if ($('#billing_state option').length > 1) {\n                $('#billing_state').closest('.form-row').show();\n            } else {\n                $('#billing_state').closest('.form-row').hide();\n            }\n        }\n\n        jQuery(document).on('ready', function () {\n            jQuery('.woocommerce-checkout .chosen-container').show();\n        });\n\n        jQuery('.wc_payment_methods .payment_box').each(function (index, element) {\n            if (jQuery(element).find('p').length === 0 && jQuery(this).hasClass('payment_method_braintree_paypal')) {\n                jQuery(this).addClass('is-disabled');\n            }\n        })\n\n        selectPaymentMethod();\n    });\n\n    function selectPaymentMethod() {\n        $('.woocommerce-checkout-payment .wc_payment_method label, .woocommerce-checkout-payment .wc_payment_method input').click(function () {\n            if (!$(this).closest('.wc_payment_method').hasClass('is-active')) {\n                $('.woocommerce-checkout-payment .wc_payment_method').removeClass('is-active')\n                $(this).closest('.wc_payment_method').addClass('is-active');\n            }\n        });\n\n        $('.woocommerce-checkout-payment .wc_payment_method').each(function (index, element) {\n            if ($(element).find('input:checked').length > 0) {\n                $(element).addClass('is-active');\n                return;\n            }\n        });\n    }\n\n    /**\n     * Input floating label\n     */\n    function initFloatingLabels() {\n        console.log('initFloatingLabels')\n        if ($('body').hasClass('woocommerce-checkout-input-label-style-floating')) {\n            $('.form-row .woocommerce-input-wrapper input').each(function (index, element) {\n                updateInputLabel($(element));\n            });\n\n            $('.form-row label').click(function () {\n                $(this).next('input').focus();\n            });\n\n            $('.form-row .woocommerce-input-wrapper input').focusin(function () {\n                $(this).closest('.form-row').find('label').addClass('is-active');\n            });\n\n            $('.form-row .woocommerce-input-wrapper input').focusout(function () {\n                updateInputLabel($(this));\n            });\n\n            function updateInputLabel(input) {\n                if (input.val().length <= 0) {\n                    input.closest('.form-row').find('label').removeClass('is-active');\n                } else {\n                    input.closest('.form-row').find('label').addClass('is-active');\n                }\n            }\n        }\n    }\n\n    if ($('body').hasClass('woocommerce-checkout-steps')) {\n        $('#customer_details .btn-next').click(function () {\n\n            if (!billingFieldsAreValid()) {\n                return\n            }\n\n            $(this).closest('.b-actions').fadeOut();\n\n            let formValues = getAllFormValues('.woocommerce-billing-fields__field-wrapper');\n            let summary = $('<div class=\"woocommerce-billing-fields-summary\"></div>');\n\n            if (formValues.billing_first_name || formValues.billing_last_name) {\n                summary.append('<div class=\"e-name\">' + formValues.billing_first_name + ' ' + formValues.billing_last_name + '</div>')\n            }\n\n            Object.entries(formValues).map(function (element) {\n                let key = element[0];\n                let value = element[1];\n\n                if (key === 'billing_first_name' || key === 'billing_last_name') {\n                    return;\n                }\n\n                summary.append('<div class=\"e-value\">' + value + '</div>')\n            })\n\n            let billingFields = $('.woocommerce-billing-fields__field-wrapper');\n            billingFields.fadeOut().promise().done(function () {\n                $(this).closest('.col2-set').addClass('is-completed')\n\n                summary.insertAfter(billingFields);\n\n                $(this).closest('.col2-set').find('.woocommerce-additional-fields').fadeIn();\n\n                $('.b-breadcrumb .b-breadcrumb-text').removeClass('is-active');\n                $('.b-breadcrumb .b-breadcrumb-text[data-type=\"payment\"]').addClass('is-active');\n            })\n        });\n\n        $('.woocommerce-billing-fields .btn-edit').click(function () {\n            let parent = $(this).closest('.col2-set');\n\n            parent.find('.woocommerce-additional-fields').fadeOut();\n            parent.find('.woocommerce-billing-fields-summary').fadeOut().promise().done(function () {\n                parent.removeClass('is-completed')\n                parent.find('.woocommerce-billing-fields__field-wrapper').fadeIn();\n                parent.find('.b-actions').fadeIn();\n\n                $('.b-breadcrumb .b-breadcrumb-text').removeClass('is-active');\n                $('.b-breadcrumb .b-breadcrumb-text[data-type=\"information\"]').addClass('is-active');\n            })\n        });\n\n        function billingFieldsAreValid() {\n            jQuery('.validate-required input, .validate-required select').trigger('validate');\n\n            let isValid = true;\n            jQuery('.woocommerce-invalid').each(function (index, element) {\n                if (element.id.length > 0) {\n                    isValid = false;\n                }\n            })\n\n            return isValid;\n        }\n\n        function getAllFormValues(form) {\n            const formElements = document.querySelectorAll(form + ' input, ' + form + ' select, ' + form + ' textarea');\n\n            const formData = {};\n\n            formElements.forEach(element => {\n                if (element.name) {\n                    if (element.type === 'checkbox') {\n                        formData[element.name] = element.checked;\n                    } else if (element.type === 'select-one' && element.options[element.selectedIndex]) {\n                        formData[element.name] = element.options[element.selectedIndex].text;\n                    } else {\n                        formData[element.name] = element.value;\n                    }\n                }\n            });\n\n            return formData;\n        }\n\n        $('#order_review_heading').click(function () {\n            $(this).toggleClass('is-open')\n        });\n    }\n})(jQuery);\n"],"names":["message","$","click","this","parent","fadeOut","resetSelects","window","select","chosen","parseInt","growtype_wc_ajax","wc_version","setTimeout","jQuery","selectArgs","select2","on","event","console","log","document","body","width","notice","height","css","hasClass","updateInputLabel","input","val","length","closest","find","removeClass","addClass","each","index","element","next","focus","focusin","focusout","initFloatingLabels","show","hide","trigger","isValid","id","billingFieldsAreValid","form","formElements","formData","formValues","querySelectorAll","forEach","name","type","checked","options","selectedIndex","text","value","summary","billing_first_name","billing_last_name","append","Object","entries","map","key","billingFields","promise","done","insertAfter","fadeIn","toggleClass"],"sourceRoot":""}